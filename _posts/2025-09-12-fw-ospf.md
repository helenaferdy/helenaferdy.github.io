---
title: OSPF on Firewalls
date: 2025-09-12 07:30:00 +0700
categories: [Networking, OSPF]
tags: [Check Point, ASA, Fortinet, Palo Alto, FTD]
---


Here's the planned topology for OSPF configuration across multiple firewalls

![x](/static/2025-09-12-fw-ospf/01.png)

<br>

On the Core Switch side, we enable OSPF on all required interfaces

![x](/static/2025-09-12-fw-ospf/02.png)

<br>

Here we can see the OSPF configuration is up and running

![x](/static/2025-09-12-fw-ospf/03.png)

> show ip ospf neighbor

![x](/static/2025-09-12-fw-ospf/04.png)

> show ip route ospf

<br>

### Fortigate

On fortigate side, enable OSPF on Network >> OSPF. Here we give it Router ID, Area 0, and networks to join the OSPF neighborship

![x](/static/2025-09-12-fw-ospf/05.png)

<br>

Run this command to show OSPF neighborship on CLI

![x](/static/2025-09-12-fw-ospf/05a.png)

> get router info ospf neighbor

<br>

We can also see the advertised routes that we receive from OSPF on Routing Monitor

![x](/static/2025-09-12-fw-ospf/06.png)

![x](/static/2025-09-12-fw-ospf/06a.png)

> get router info routing-table ospf

<br>

### Palo Alto

On Palo side, we configure OSPF on the Virtual Router, here we enable OSPF, give it Router ID, Area 0, and interfaces to be part of neighborship

![x](/static/2025-09-12-fw-ospf/07.png)

<br>

Now on the runtime stats we can see the OSPF process is up and running

![x](/static/2025-09-12-fw-ospf/08.png)

![x](/static/2025-09-12-fw-ospf/08a.png)

> show routing protocol ospf neighbor

<br>

We can also see all the advertised routes we receive from OSPF

![x](/static/2025-09-12-fw-ospf/09.png)

![x](/static/2025-09-12-fw-ospf/09a.png)

> show routing route

<br>

### Check Point

On Check Point side, we configure OSPF through GAIA, here we create an Area 0 (Backbone), give it Router ID, and add the interface members

![x](/static/2025-09-12-fw-ospf/10.png)

<br>

On Monitoring tab, we can see the OSPF process is now running

![x](/static/2025-09-12-fw-ospf/11.png)

![x](/static/2025-09-12-fw-ospf/11a.png)

> show ospf neighbors

<br>

On routing monitors we can also see the received routes 

![x](/static/2025-09-12-fw-ospf/12.png)

![x](/static/2025-09-12-fw-ospf/12a.png)

> show route ospf

<br>

### Cisco FTD

On FTD managed by FMC, we can enable OSPF on the Routing tab, here we enable the OSPF process as Internal Router, then add the Area 0 with the networks that we wish to be advertised

![x](/static/2025-09-12-fw-ospf/13.png)

<br>

Then on Interface, add the interface members

![x](/static/2025-09-12-fw-ospf/14.png)

<br>

To verify OSPF process, run the cli commands

![x](/static/2025-09-12-fw-ospf/15.png)

> show ospf neighbor <br>
> show ospf database

![x](/static/2025-09-12-fw-ospf/16.png)

> show route ospf

<br>

### Cisco ASA

Below is the OSPF configuration on the ASA side

```
router ospf 1
 router-id 172.16.51.2
 network 10.51.0.0 255.255.255.0 area 0
 network 172.16.51.0 255.255.255.0 area 0
```

<br>

Run the commands to verify OSPF process

![x](/static/2025-09-12-fw-ospf/17.png)

> show ospf neighbor

![x](/static/2025-09-12-fw-ospf/18.png)

> show route ospf

<br>
<br>

## Redistribute

The configuration above enables OSPF process on all interface members to advertise their networks, even though not all interface is pointing to another OSPF neighbor.
Here we will clean up the configuration by only enabling OSPF process on the needed interface, and redistribute the connected network so it can be advertised. <br>

After configured, the advertised network will look like this

![x](/static/2025-09-12-fw-ospf/30.png)

> * Type 1 (E1) = external cost + internal OSPF cost. <br>
> * Type 2 (E2) = external cost only (default).

<br>

### Fortigate

Here we deleted the inside network

![x](/static/2025-09-12-fw-ospf/21.png)

<br>

Then we enable the Redistribute Connected option

![x](/static/2025-09-12-fw-ospf/22.png)

<br>

### Palo Alto

On the Area 0, we remove the internal interface

![x](/static/2025-09-12-fw-ospf/23.png)

<br>

And on the Export Rules, we add the network that we'd like to redistribute

![x](/static/2025-09-12-fw-ospf/24.png)

<br>

### Check Point

Here we remove the internal interface

![x](/static/2025-09-12-fw-ospf/25.png)

<br>

Then on Route Redistribution, add a new redistribution from the same interface

![x](/static/2025-09-12-fw-ospf/26.png)

<br>

### Cisco FTD

Here we need to change the OSPF role from Internal Router to ASBR to enable route redistribution, then delete the network from the OSPF process

![x](/static/2025-09-12-fw-ospf/27.png)

<br>

We also remove the inside interface

![x](/static/2025-09-12-fw-ospf/28.png)

<br>

Then on Redistribution, we add one with connected route type

![x](/static/2025-09-12-fw-ospf/29.png)

<br>

### Cisco ASA

Here's the configuration on ASA side

```
router ospf 1
 router-id 172.16.51.2
 network 172.16.51.0 255.255.255.0 area 0
 redistribute connected subnets
```









