---
title: AWS Transit Gateway
date: 2025-11-15 07:30:00 +0700
categories: [Cloud, Amazon Web Services (AWS)]
tags: [AWS]
---

AWS Transit Gateway is a centralized routing hub that connects multiple VPCs, VPNs, and on-prem networks through a single, scalable, highly available service. Instead of building many VPC-to-VPC peering links, you attach each network to the Transit Gateway and let it handle all routing between them.

<br>

Here we are continuing from this [AWS with Fortigate Lab](https://helenaferdy.github.io/posts/aws-fgt/) and we plan to add 2 more VPSc that we will interconnect using Transit Gateway

![x](/static/2025-11-15-aws-tgw/01.png)

![x](/static/2025-11-15-aws-tgw/02.png)

<br>

## Configuring VPC

We add 2 more VPCs, A-VPC and B-VPC on top of already existing helena-VPC

![x](/static/2025-11-15-aws-tgw/03.png)

<br>

Then we add its respective subnets, where A & B VPC will only have private subnets with no direct internet connection

![x](/static/2025-11-15-aws-tgw/03a.png)

<br>

We make sure these new VPCs don't have default gateway yet, we'll configure it later

![x](/static/2025-11-15-aws-tgw/04.png)

<br>

## Configuring Transit Gateway

On VPC >> Transit Gateways >> Create Transit Gateway with all default values unchanged

![x](/static/2025-11-15-aws-tgw/05.png)

![x](/static/2025-11-15-aws-tgw/06.png)

<br>

Then we create Transit Gateway Attachments for each VPC

> A Transit Gateway attachment is the Layer-3 link between a resource and the Transit Gateway.
Common types: VPC attachment, VPN attachment, Direct Connect attachment, and Peering attachment.
Each attachment creates an interface on the Transit Gateway that can send/receive routes and forward traffic.

First we create attacment for VPC-A and attach the the VPC and its subnet

![x](/static/2025-11-15-aws-tgw/07.png)

<br>

Same goes with VPC-B

![x](/static/2025-11-15-aws-tgw/08.png)

<br>

And VPC-Helena where here we will attach the only the private subnet because thats the one facing the Transit Gateway

![x](/static/2025-11-15-aws-tgw/09.png)

<br>

Here after all attachments are configured

![x](/static/2025-11-15-aws-tgw/10.png)

<br>

## Configuring Routing

Each VPC holds their own routing table, we need to give them routes to reach the transit gateway, for VPC A & B, we simply add default route to pass all traffic to the Transit Gateway

![x](/static/2025-11-15-aws-tgw/11.png)

![x](/static/2025-11-15-aws-tgw/12.png)

<br>

For Helena VPC's private subnet, we need to make sure it can reach VPC A & B subnets through Transit Gateway, and pass the default route to the Fortigate Firewall

![x](/static/2025-11-15-aws-tgw/13.png)

<br>

And lastly we need to configure routes on Transit Gateway as well, here we tell it to pass the default route traffic to helena-vpc's TGW attachment

![x](/static/2025-11-15-aws-tgw/13a.png)

<br>

## Testing

Here we spin up a small linux VM on VPC A with ip of 10.10.1.182

![x](/static/2025-11-15-aws-tgw/14.png)

<br>

We confirm that this host can access hosts on VPC B, VPC Helena, as well as to Internet through VPC Helena and the firewall configure there

![x](/static/2025-11-15-aws-tgw/15.png)

<br>

Same goes with the VPC B with ip of 10.20.1.202

![x](/static/2025-11-15-aws-tgw/16.png)

<br>

This host can also access hosts on VPC A, VPC Helena and the Internet

![x](/static/2025-11-15-aws-tgw/17.png)

<br>

On the Fortigate Firewall, we can see the traffic traversing this device from hosts on VPC A & B to go to the internet

![x](/static/2025-11-15-aws-tgw/18.png)

<br>
