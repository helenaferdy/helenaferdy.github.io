---
title: Cisco ASA HA Cluster
date: 2024-08-26 09:00:00 +0700
categories: [Security, Cisco Adaptive Security Appliance (ASA)]
tags: [ASA]
---

A Cisco ASA (Adaptive Security Appliance) HA (High Availability) cluster consists of two ASA devices configured to operate as a single unit to ensure continuous network security services in case of hardware or software failures. In an HA setup, one ASA acts as the active device handling all traffic, while the other(s) function as standby units, ready to take over in case the active device fails, providing redundancy and minimizing downtime.

![x](/static/2024-08-25-asa-ha/00.png)

<br>

## Active-Standby

Firstly on the Primary Node, we're configuring the IP Address followed by its standby IP Address

![x](/static/2024-08-25-asa-ha/01.png)

```shell
int g0/1
nameif uplink
ip add 10.10.104.2 255.255.255.0 standby 10.10.104.3
security-level 100
no shut

int g0/2
namif downlink
ip add 10.10.101.1 255.255.255.0 standby 10.10.101.2 255.255.255.0
security-level 0
no shut
```

<br>

Next we add failover configuration, this command will use G0/3 interface as the HA link

![x](/static/2024-08-25-asa-ha/02.png)

```shell
failover lan unit primary
failover lan interface fo-link g0/3
failover interface ip fo-link 10.1.11.1 255.255.255.0 standby 10.1.11.2

failover
```

<br>

Then unshut the G0/3 interface for the failover configuration to activate

![x](/static/2024-08-25-asa-ha/03.png)

<br>

On the Secondary Node, we just need to add the failover configuration, because other configs will be synced from the Primary later

![x](/static/2024-08-25-asa-ha/04.png)

```shell
failover lan unit secondary
failover lan interface fo-link g0/3
failover interface ip fo-link 10.1.11.1 255.255.255.0 standby 10.1.11.2

failover
```

<br>

Unshut the G0/3 interface and the failover sequence will start

![x](/static/2024-08-25-asa-ha/05.png)

<br>

Running "show failover" on Primary shows that it is the active node

![x](/static/2024-08-25-asa-ha/07.png)

<br>

On the Secondary it detects itself as the standby node

![x](/static/2024-08-25-asa-ha/08.png)

<br>

## Failing Over

Lets simulate a network failure by disconnecting some interfaces on the Primary Node

![x](/static/2024-08-25-asa-ha/09.png)

<br>

The Primary will immediately switch itself into Failed state and take the standby configuration

![x](/static/2024-08-25-asa-ha/09a.png)

<br>

The Secondary will take the active role and take the active configuration

![x](/static/2024-08-25-asa-ha/09b.png)

<br>

Running "show failover" shows that the secondary is indeed the active node

![x](/static/2024-08-25-asa-ha/10.png)

<br>

There's some outage but nothingg significant on the client side when the failover happens

![x](/static/2024-08-25-asa-ha/11.png)

<br>

## Switching Back

Now lets restore the network functionality on the Primary Node, it will make the node change its state from Failed to Standby. <br>
To actually claim the active role again, run "failover active"

![x](/static/2024-08-25-asa-ha/12.png)

<br>




















